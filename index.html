<!DOCTYPE html>
<html>
<head>
    <title>Easy Auto Services Booking</title>
    <style>
        /* CSS for basic styling (you can expand on this) */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        #header {
            background-color: #fff;
            width: 100%;
            padding: 10px;
        }
        #header h1 {
            margin: 0;
        }
        #search-box {
            margin: 20px auto;
            text-align: center;
            width: 70%; /* Set the width of the search row */
            background-color: #fff;
            padding: 10px;
        }
        .input-container {
            display: inline-block;
            margin-right: 10px;
            position: relative; /* Add relative positioning */
        }
        .input-container select {
            width: auto; /* Adjust the width of the time select box */
        }
        #city-suggestions, #service-suggestions {
            display: none;
            position: absolute; /* Position the suggestion boxes absolutely */
            top: 100%; /* Display below the search box */
            left: 0;
            width: 100%; /* Match the width of the search box */
            background-color: #f1f1f1;
            z-index: 1; /* Ensure suggestions are on top of other elements */
        }
        .suggestion-item {
            padding: 10px;
            cursor: pointer;
        }
        #service-suggestions {
            position: relative; /* Change position to relative to remove hover effect */
        }
        #sample-service-list {
            display: none;
            font-size: 14px;
            color: gray;
            margin-top: 5px;
        }
        /* Added CSS for the "Get Current Location" dropdown */
        #current-location-dropdown {
            display: none;
            position: absolute;
            top: calc(100% + 10px); /* Adjust the top position */
            left: 0;
            width: 100%;
            background-color: #f1f1f1;
            z-index: 1;
        }
        #current-location-dropdown button {
            display: block;
            width: 100%;
            padding: 10px;
            border: none;
            background-color: transparent;
            text-align: left;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>Book your next auto services today</h1>
    </div>
    <div id="search-box">
        <div class="input-container" id="location-suggestions">
            <div id="location-dropdown">
                <input type="text" id="location" placeholder="Enter city or ZIP code" onfocus="showGetCurrentLocation()" onblur="hideGetCurrentLocation()">
                <div id="current-location-dropdown">
                    <button id="get-current-location" onclick="getCurrentLocation()">Get Current Location</button>
                </div>
                <div id="city-suggestions"></div>
            </div>
        </div>
        <div class="input-container">
            <input type="date" id="date">
        </div>
        <div class="input-container">
            <select id="time">
                <!-- Expanded time options from 8 AM to 6 PM -->
                <option value="08:00">08:00 AM</option>
                <option value="08:30">08:30 AM</option>
                <option value="09:00">09:00 AM</option>
                <!-- ... (other time options) ... -->
                <option value="17:00">05:00 PM</option>
                <option value="17:30">05:30 PM</option>
            </select>
        </div>
        <div class="input-container">
            <input type="text" id="service" placeholder="Popular searches in your area today (e.g., Oil Change, Brake Repair)" autocomplete="off" onfocus="showSampleServiceList()" onblur="hideSampleServiceList()">
            <div id="service-suggestions"></div>
            <div id="sample-service-list">
                Sample Popular Services:<br>
                - Oil Change<br>
                - Brake Repair<br>
                - Tire Replacement<br>
                - Engine Diagnostics<br>
                - Transmission Repair
            </div>
        </div>
        <button onclick="searchRepairShops()">Search</button>
    </div>
    <div id="results">
        <!-- Search results will be displayed here -->
    </div>

    <script>
        const locationInput = document.getElementById("location");
        const dateInput = document.getElementById("date");
        const timeSelect = document.getElementById("time");
        const serviceInput = document.getElementById("service");
        const citySuggestions = document.getElementById("city-suggestions");
        const serviceSuggestions = document.getElementById("service-suggestions");
        const sampleServiceList = document.getElementById("sample-service-list");
        const getCurrentLocationBtn = document.getElementById("get-current-location");
        const currentLocationDropdown = document.getElementById("current-location-dropdown");

        // Set the date input to today's date by default
        const today = new Date().toISOString().split("T")[0];
        dateInput.value = today;

        // Calculate the nearest 30-minute increment for the time input by default
        const now = new Date();
        now.setMinutes(Math.ceil(now.getMinutes() / 30) * 30);
        const defaultTime = `${String(now.getHours()).padStart(2, "0")}:${String(now.getMinutes()).padStart(2, "0")}`;
        timeSelect.value = defaultTime;

        function getCurrentLocation() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;

                    // You can use a reverse geocoding service to get the city or address from the coordinates.
                    // Here, we're just setting the input field to "Current Location" as a placeholder.
                    locationInput.value = "Current Location";
                });
            }
        }

        function showGetCurrentLocation() {
            currentLocationDropdown.style.display = "block";
        }

        function hideGetCurrentLocation() {
            currentLocationDropdown.style.display = "none";
        }

        locationInput.addEventListener("input", function () {
            const inputValue = this.value.trim();
            if (inputValue.length === 0) {
                citySuggestions.style.display = "none";
                return;
            }

            // You can replace this with your own API endpoint for city suggestions.
            // Here, we're simulating suggestions with a simple array.
            const suggestions = ["New York", "Los Angeles", "Chicago", "Houston", "San Francisco"];

            // Filter suggestions based on the user's input.
            const filteredSuggestions = suggestions.filter(suggestion =>
                suggestion.toLowerCase().includes(inputValue.toLowerCase())
            );

            // Display matching suggestions in a dropdown within the location input.
            if (filteredSuggestions.length > 0) {
                citySuggestions.style.display = "block";
                citySuggestions.innerHTML = "";
                filteredSuggestions.forEach(suggestion => {
                    const suggestionItem = document.createElement("div");
                    suggestionItem.className = "suggestion-item";
                    suggestionItem.textContent = suggestion;
                    suggestionItem.addEventListener("click", function () {
                        locationInput.value = suggestion;
                        citySuggestions.style.display = "none";
                    });
                    citySuggestions.appendChild(suggestionItem);
                });
            } else {
                citySuggestions.style.display = "none";
            }
        });

        function showSampleServiceList() {
            sampleServiceList.style.display = "block";
        }

        function hideSampleServiceList() {
            sampleServiceList.style.display = "none";
        }

        serviceInput.addEventListener("input", function () {
            const inputValue = this.value.trim();
            if (inputValue.length === 0) {
                serviceSuggestions.style.display = "none";
                return;
            }

            // Simulate auto-suggestions for auto repair services.
            const serviceSuggestionsArray = ["Oil Change", "Brake Repair", "Tire Replacement", "Engine Diagnostics", "Transmission Repair"];

            // Filter suggestions based on the user's input.
            const filteredServiceSuggestions = serviceSuggestionsArray.filter(suggestion =>
                suggestion.toLowerCase().includes(inputValue.toLowerCase())
            );

            // Display matching service suggestions in a dropdown.
            if (filteredServiceSuggestions.length > 0) {
                serviceSuggestions.style.display = "block";
                serviceSuggestions.innerHTML = "";
                filteredServiceSuggestions.forEach(suggestion => {
                    const suggestionItem = document.createElement("div");
                    suggestionItem.className = "suggestion-item";
                    suggestionItem.textContent = suggestion;
                    suggestionItem.addEventListener("click", function () {
                        serviceInput.value = suggestion;
                        serviceSuggestions.style.display = "none";
                    });
                    serviceSuggestions.appendChild(suggestionItem);
                });
            } else {
                serviceSuggestions.style.display = "none";
            }
        });

        function searchRepairShops() {
            const location = locationInput.value;
            const selectedDate = dateInput.value;
            const selectedTime = timeSelect.value;
            const selectedService = serviceInput.value;
            // Continue with the search functionality as before, including date, time, and service.
            // ...
        }
    </script>
</body>
</html>
