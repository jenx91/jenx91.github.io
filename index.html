<!DOCTYPE html>
<html>
<head>
    <title>Auto Repair Shop Booking</title>
    <style>
        /* CSS for basic styling (you can expand on this) */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #search-box {
            margin: 20px;
            text-align: center;
            width: 70%; /* Set the width of the search row */
            margin: 0 auto; /* Center the search row horizontally */
        }
        .input-container {
            display: inline-block;
            margin-right: 10px;
        }
        .input-container select {
            width: auto; /* Adjust the width of the time select box */
        }
        #city-suggestions, #service-suggestions {
            display: none;
            position: absolute; /* Position the suggestion boxes absolutely */
            top: 100%; /* Display below the search box */
            left: 0;
            width: 100%; /* Match the width of the search box */
            background-color: #f1f1f1;
        }
        .suggestion-item {
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Find Auto Repair Shops</h1>
    <div id="search-box">
        <div class="input-container" id="location-suggestions">
            <input type="text" id="location" placeholder="Enter city or ZIP code">
            <div id="city-suggestions"></div>
        </div>
        <div class="input-container">
            <input type="date" id="date">
        </div>
        <div class="input-container">
            <select id="time">
                <!-- Expanded time options from 8 AM to 6 PM -->
                <option value="08:00">08:00 AM</option>
                <option value="08:30">08:30 AM</option>
                <option value="09:00">09:00 AM</option>
                <option value="09:30">09:30 AM</option>
                <option value="10:00">10:00 AM</option>
                <option value="10:30">10:30 AM</option>
                <option value="11:00">11:00 AM</option>
                <option value="11:30">11:30 AM</option>
                <option value="12:00">12:00 PM</option>
                <option value="12:30">12:30 PM</option>
                <option value="13:00">01:00 PM</option>
                <option value="13:30">01:30 PM</option>
                <option value="14:00">02:00 PM</option>
                <option value="14:30">02:30 PM</option>
                <option value="15:00">03:00 PM</option>
                <option value="15:30">03:30 PM</option>
                <option value="16:00">04:00 PM</option>
                <option value="16:30">04:30 PM</option>
                <option value="17:00">05:00 PM</option>
                <option value="17:30">05:30 PM</option>
            </select>
        </div>
        <div class="input-container" id="service-suggestions">
            <input type="text" id="service" placeholder="Enter auto repair service">
        </div>
        <button onclick="searchRepairShops()">Search</button>
    </div>
    <div id="results">
        <!-- Search results will be displayed here -->
    </div>

    <script>
        const locationInput = document.getElementById("location");
        const dateInput = document.getElementById("date");
        const timeSelect = document.getElementById("time");
        const serviceInput = document.getElementById("service");
        const citySuggestions = document.getElementById("city-suggestions");
        const serviceSuggestions = document.getElementById("service-suggestions");

        // Set the date input to today's date by default
        const today = new Date().toISOString().split("T")[0];
        dateInput.value = today;

        // Calculate the nearest 30-minute increment for the time input by default
        const now = new Date();
        now.setMinutes(Math.ceil(now.getMinutes() / 30) * 30);
        const defaultTime = `${String(now.getHours()).padStart(2, "0")}:${String(now.getMinutes()).padStart(2, "0")}`;
        timeSelect.value = defaultTime;

        locationInput.addEventListener("input", function () {
            const inputValue = this.value.trim();
            if (inputValue.length === 0) {
                citySuggestions.style.display = "none";
                return;
            }

            // You can replace this with your own API endpoint for city suggestions.
            // Here, we're simulating suggestions with a simple array.
            const suggestions = ["New York", "Los Angeles", "Chicago", "Houston", "San Francisco"];

            // Filter suggestions based on the user's input.
            const filteredSuggestions = suggestions.filter(suggestion =>
                suggestion.toLowerCase().includes(inputValue.toLowerCase())
            );

            // Display matching suggestions in a dropdown within the location input.
            const locationSuggestions = document.getElementById("location-suggestions");
            if (filteredSuggestions.length > 0) {
                citySuggestions.style.display = "block";
                citySuggestions.innerHTML = "";
                filteredSuggestions.forEach(suggestion => {
                    const suggestionItem = document.createElement("div");
                    suggestionItem.className = "suggestion-item";
                    suggestionItem.textContent = suggestion;
                    suggestionItem.addEventListener("click", function () {
                        locationInput.value = suggestion;
                        citySuggestions.style.display = "none";
                    });
                    citySuggestions.appendChild(suggestionItem);
                });
            } else {
                citySuggestions.style.display = "none";
            }
        });

        locationInput.addEventListener("change", function () {
            const inputValue = this.value.trim();
            // Simulate looking up the city based on the entered ZIP code.
            if (/^\d{5}$/.test(inputValue)) {
                // You can replace this with your own ZIP code to city lookup logic.
                const zipToCityMap = {
                    "12345": "Sample City 1",
                    "67890": "Sample City 2",
                };

                const city = zipToCityMap[inputValue];
                if (city) {
                    locationInput.value = city;
                }
            }
        });

        serviceInput.addEventListener("input", function () {
            const inputValue = this.value.trim();
            if (inputValue.length === 0) {
                serviceSuggestions.style.display = "none";
                return;
            }

            // Simulate auto-suggestions for auto repair services.
            const serviceSuggestionsArray = ["Oil Change", "Brake Repair", "Tire Replacement", "Engine Diagnostics", "Transmission Repair"];

            // Filter suggestions based on the user's input.
            const filteredServiceSuggestions = serviceSuggestionsArray.filter(suggestion =>
                suggestion.toLowerCase().includes(inputValue.toLowerCase())
            );

            // Display matching service suggestions in a dropdown.
            if (filteredServiceSuggestions.length > 0) {
                serviceSuggestions.style.display = "block";
                serviceSuggestions.innerHTML = "";
                filteredServiceSuggestions.forEach(suggestion => {
                    const suggestionItem = document.createElement("div");
                    suggestionItem.className = "suggestion-item";
                    suggestionItem.textContent = suggestion;
                    suggestionItem.addEventListener("click", function () {
                        serviceInput.value = suggestion;
                        serviceSuggestions.style.display = "none";
                    });
                    serviceSuggestions.appendChild(suggestionItem);
                });
            } else {
                serviceSuggestions.style.display = "none";
            }
        });

        function searchRepairShops() {
            const location = locationInput.value;
            const selectedDate = dateInput.value;
            const selectedTime = timeSelect.value;
            const selectedService = serviceInput.value;
            // Continue with the search functionality as before, including date, time, and service.
            // ...
        }
    </script>
</body>
</html>
